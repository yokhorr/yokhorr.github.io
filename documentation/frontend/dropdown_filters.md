## Документация к коду фильтрации городов, кинотеатров, жанров, антижанров и возраста

### Описание функционала

Код реализует фильтр фильмов по нескольким параметрам:

* **Город**: Пользователь может выбрать город из выпадающего списка. 
* **Кинотеатр**: После выбора города пользователю доступен список кинотеатров в этом городе.
* **Жанр**: Пользователь может выбрать жанры из выпадающего списка. 
* **Антижанр**: Пользователь может выбрать антижанры из выпадающего списка. Выбранные жанры скрываются в списке антижанров и наоборот.
* **Возрастное ограничение**: Пользователь может выбрать возрастное ограничение из выпадающего списка.

### Структура кода

**1. Данные:**

* **`cityToTheatres`**: Объект, содержащий информацию о городах и соответствующих им кинотеатрах. Ключ - название города, значение - массив названий кинотеатров в этом городе.

**2. Фильтры:**

* **`dropdowns`**: Список элементов DOM с классом `dropdown`. Каждый элемент представляет собой выпадающий список.
* **`cityDropdown`, `theatreDropdown`, `genreDropdown`, `antiGenreDropdown`, `ageDropdown`**: Элементы DOM, представляющие собой выпадающие списки для выбора города, кинотеатра, жанра, антижанра и возрастного ограничения соответственно.
* **`theatreSelect`, `genreSelect`, `antiGenreSelect`, `ageSelect`**: Элементы DOM, представляющие собой выпадающие списки для выбора кинотеатра, жанра, антижанра и возрастного ограничения.
* **`cityMenu`, `theatreMenu`, `genreMenu`, `antiGenreMenu`, `ageMenu`**: Элементы DOM, представляющие собой списки вариантов в выпадающих списках для выбора города, кинотеатра, жанра, антижанра и возрастного ограничения.

**3. Логика фильтрации:**

* **`cityToTheatres`**:  Используется для получения списка кинотеатров по выбранному городу.
* **`cityMenu.addEventListener`, `theatreMenu.addEventListener`, `genreMenu.addEventListener`, `antiGenreMenu.addEventListener`, `ageMenu.addEventListener`**:  Добавляют обработчики события клика на элементы выпадающих списков.
* **`selectedCity`, `selectedTheatre`, `selectedOptionsTheatre`, `selectedAge`**:  Переменные, хранящие выбранный город, кинотеатр, выбранные опции в меню театра и выбранное возрастное ограничение соответственно.

**4. Логика взаимодействия с DOM:**

* **`select.addEventListener("click")`**:  Добавляет обработчик события клика на элемент `.select`. При клике происходит переключение классов для анимации раскрытия/свертывания выпадающего списка.
* **`cityMenu.addEventListener("click")`, `theatreMenu.addEventListener("click")`, `genreMenu.addEventListener("click")`, `antiGenreMenu.addEventListener("click")`, `ageMenu.addEventListener("click")`**: Добавляют обработчики события клика на элементы выпадающих списков.
* **`event.target.textContent`**: Получает название выбранного города, кинотеатра, жанра, антижанра или возрастного ограничения.
* **`theatreSelect.innerHTML = '';`**: Очищает список кинотеатров при смене города.
* **`selectedCity.classList.add('active')`**:  Добавляет класс `active` к выбранному элементу города в выпадающем списке.
* **`cityDropdown.querySelector('.selected').textContent`**: Обновляет текст выбранного города в элементе `.selected`.
* **`event.target.classList.add('active')`**: Добавляет класс `active` к выбранному элементу в выпадающем списке жанров/антижанров/возраста.
* **`event.target.classList.remove('active')`**: Удаляет класс `active` с выбранного элемента в выпадающем списке жанров/антижанров/возраста.
* **`item.style.display = 'none'`**: Скрывает элемент в выпадающем списке.
* **`item.style.display = 'block'`**: Показываем элемент в выпадающем списке.

### Детальное описание

**1. Инициализация:**

*  С помощью `document.querySelectorAll(".dropdown")` получаем все элементы DOM с классом `dropdown`.
*  Используя `forEach`, для каждого элемента `dropdown` получаем доступ к его внутренним элементам:
    * `.select`: элемент для вызова выпадающего списка.
    * `.caret`: элемент для визуального представления раскрытия списка.
    * `.menu`: сам выпадающий список.
    * `.options`:  элементы списка (варианты выбора).
    * `.selected`: элемент, отображающий выбранный вариант.
*  Создается пустой массив `selectedOptionsTheatre` для хранения выбранных вариантов в меню театра.
*  Добавляется обработчик клика на элемент `.select`, который переключает классы для анимации открытия/закрытия списка.

**2. Фильтрация городов и кинотеатров:**

*  В обработчике клика на элемент выпадающего списка городов `cityMenu`  проверяется, что клик был по элементу списка `LI`, а не по самому меню.
*  Получается название выбранного города.
*  Очищается список кинотеатров `theatreSelect`.
*  Проверяется, есть ли кинотеатры в выбранном городе. Если есть, то:
    *  Проходится по списку кинотеатров для данного города.
    *  Создается элемент `li` с названием кинотеатра.
    *  Добавляется элемент `li` в список кинотеатров `theatreSelect`.
*  Обновляется текст выбранного города в элементе `.selected` с помощью `cityDropdown.querySelector('.selected').textContent`.
*  Переключаются классы для анимации открытия/закрытия выпадающего списка городов.
*  Удаляется класс `active` со всех элементов списка городов, кроме выбранного.

**3. Фильтрация жанров и антижанров:**

*  В обработчике клика на элемент выпадающего списка жанров/антижанров (`genreMenu` или `antiGenreMenu`)  проверяется, что клик был по элементу списка `LI`.
*  Проверяется,  был ли элемент выбран.
*  Если элемент уже выбран, удаляется класс `active`, и элемент скрывается в противоположном списке (жанр - в антижанрах, антижанр - в жанрах).
*  Если элемент не был выбран, добавляется класс `active`, и элемент скрывается в противоположном списке. 

**4. Фильтрация возрастного ограничения:**

* В обработчике клика на элемент выпадающего списка возрастных ограничений `ageMenu`  проверяется, что клик был по элементу списка `LI`.
* Удаляется класс `active` с предыдущего выбранного элемента.
*  Добавляется класс `active` к выбранному элементу в списке возрастных ограничений.
*  Обновляется текст выбранного возрастного ограничения в элементе `.selected`.
*  Переключаются классы для анимации открытия/закрытия выпадающего списка.
*  Удаляется класс `active` со всех элементов списка, кроме выбранного. 

### Ответы на вопросы

* **Какие изменения нужны для добавления новых городов, кинотеатров, жанров, антижанров или возрастных ограничений?**
    * Для добавления новых городов и кинотеатров нужно добавить новые записи в объект `cityToTheatres`. 
    * Для добавления новых жанров и антижанров нужно добавить новые элементы в списки `genreMenu` и `antiGenreMenu`.
    * Для добавления новых возрастных ограничений нужно добавить новые элементы в список `ageMenu`. 
* **Как изменить дизайн выпадающего списка?**
    *  Изменить CSS-стили элементов `.dropdown`, `.select`, `.caret`, `.menu`, `.options`, `.selected`.


## Документация к CSS-коду фильтров

### Файл filters.css

#### Основная структура:

• #filters:
  * min-width: 9em; - Минимальная ширина блока фильтров (9em).
  * position: relative; - Позиционирование относительно родительского элемента.
  * min-height: 6vh; - Минимальная высота блока фильтров (6% от высоты окна браузера).
  * display: flex; - Применение модели Flexbox для выравнивания элементов.
  * flex-wrap: wrap; - Размещение элементов в несколько строк при необходимости.
  * justify-content: space-between; - Выравнивание элементов по краям контейнера.

• .dropdown:
  * flex-grow: 0.1; - Занимает всё доступное пространство внутри родительского контейнера.
  * margin: 0.5em; - Отступы между элементами.
  * box-sizing: border-box; - Учёт padding и border в ширину и высоту элемента.

• .dropdown .container:
  * position: relative; - Позиционирование относительно родительского элемента.
  * grid-template-columns: 9em; - Ширина колонок сетки (9em).
  * grid-auto-rows: min-content; - Минимальная высота строк сетки.
  * grid-gap: 1em; - Отступы между элементами сетки.

#### Стилизация выпадающего списка:

• .select:
  * background: #db6ae6; - Цвет фона.
  * color: #f0f0f0; - Цвет текста.
  * display: flex; - Применение Flexbox для выравнивания элементов.
  * justify-content: space-between; - Выравнивание элементов по краям контейнера.
  * align-items: center; - Вертикальное выравнивание элементов по центру.
  * border: 1px #e2e2e2 solid; - Внешняя граница.
  * border-radius: 2em; - Скругление углов.
  * padding: 0.5em; - Внутренние отступы.
  * cursor: pointer; - Курсор в виде указательной стрелки.
  * transition: background 0.3s; - Плавно изменяет фон при наведении курсора.
  * z-index: 4; - Уровень z-index для элемента (для правильного позиционирования).

• .select-clicked:
  * border: 2px #9db4eb solid; - Внешняя граница при клике по элементу.
  * box-shadow: 0 0 0.8em #26489a; - Тень при клике по элементу.

• .select:hover:
  * background: #cf8fec; - Цвет фона при наведении курсора.

• .caret:
  * width: 0; - Ширина элемента (невидимый элемент).
  * height: 0; - Высота элемента (невидимый элемент).
  * border-left: 5px solid transparent; - Левая граница треугольника (прозрачная).
  * border-right: 5px solid transparent; - Правая граница треугольника (прозрачная).
  * border-top: 6px solid #fafafa; - Верхняя граница треугольника (цвет #fafafa).
  * transition: 0.3s; - Плавно вращает треугольник при клике по элементу.

• .caret-rotate:
  * transform: rotate(180deg); - Вращение треугольника на 180 градусов при клике по элементу.

#### Стилизация выпадающего меню:

• .menu:
  * list-style: none; - Удаление маркеров списка.
  * padding: 0.2em 0.5em; - Внутренние отступы.
  * background: #e4e6e9; - Цвет фона.
  * border: 1px #1447be solid; - Внешняя граница.
  * box-shadow: 0 0.5em 1em rgba(202, 48, 48, 0.2); - Тень для элемента.
  * border-radius: 0.5em; - Скругление углов.
  * color: #000000; - Цвет текста.
  * position: absolute; - Абсолютное позиционирование.
  * top: 2em; - Вертикальное смещение от верхнего края родительского элемента.
  * left: 50%; - Горизонтальное смещение от левого края родительского элемента.
  * width: 100%; - Ширина элемента (100% от ширины родительского элемента).
  * transform: translateX(-50%); - Центрирование элемента по горизонтали.
  * opacity: 0; - Непрозрачность элемента (скрыто по умолчанию).
  * display: none; - Элемент скрыт по умолчанию.
  * transition: 0.2s; - Плавно изменяет прозрачность при открытии меню.
  * z-index: 6; - Уровень z-index для элемента (для правильного позиционирования).

• .menu li:
  * padding: 0.7em 0.5em; - Внутренние отступы.
  * margin: 0.3em 0; - Отступы между элементами списка.
  * border-radius: 0.5em; - Скругление углов.
  * cursor: pointer; - Курсор в виде указательной стрелки.

• .menu li:hover:
  * background: #cf8fec; - Цвет фона при наведении курсора.

• .active:
  * background: #d4d4d4; - Цвет фона для активного элемента списка.

• .menu-open:
  * display: block; - Отображает элемент.
  * opacity: 1; - Устанавливает прозрачность в 1 (полностью видимый).

#### Медиа-запросы:

• @media (max-width: 8000px), @media (max-width: 1800px): 
  * Изменяет left и top элемента dropdown для более правильного позиционирования на больших экранах.

• @media (max-width: 1300px):
  * Изменяет left и top элемента dropdown для корректного позиционирования на экранах с шириной 1300px и меньше.

• @media (max-width: 960px), @media (max-width: 580px):
  * Изменяет left элемента dropdown для корректного позиционирования на экранах с шириной 960px и меньше.

#### Функционал:

Данный код реализует визуальную часть выпадающего списка фильтров. Он обеспечивает:

• Правильное позиционирование и отображение списка на разных размерах экрана.
• Стилизацию элементов списка (фоны, цвета, отступы, границы, тени).
• Динамическое изменение внешнего вида при наведении курсора на элементы и при клике на кнопку списка.
• Анимацию плавного появления/исчезновения выпадающего меню.